//grafico con nuovo csv corretto
const cic = document.getElementById("chart").getContext("2d");

d3.csv("../csv/2013-14/form-of-exploitation2013-14-correct.csv").then(makeChart);

function makeChart(data) {
    const forms = data.map(function (d) {
        return d["form of exploitation"];
    });
    const dataValue = data.map(function (d) {
        return parseFloat(d.percentage);
    });

    new Chart(cic, {
        type: "pie",
        options: {
            tooltips: {
                mode: 'label',
                callbacks: {
                    label: function(tooltipItem, dataValue) {
                        return dataValue['datasets'][0]['data'][tooltipItem['index']] + '%';
                    }
                }
            },
            responsive: true,
            legend: {
                position: "top"
            },
            title: {
                display: true,
                text: ["Forms of exploitation 2013-14", "numbers are percentages"]
            },
            animation: {
                animateScale: true,
                animateRotate: true
            }
        },
        data: {
            labels: forms,
            datasets: [
                {
                    data: dataValue,
                    backgroundColor: ["black", "grey", "red"]
                }
            ]
        }
    });

}

